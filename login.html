<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login | ReallyUnb0ck3d</title>
<style>
  :root { --p1:#4b0082; --p2:#2e004f; --accent:#9d4edd; }
  body{
    margin:0;font-family:Arial,Helvetica,sans-serif;
    min-height:100vh;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,var(--p1),var(--p2));
    color:#fff;
  }
  .card{
    width:340px;padding:28px;border-radius:12px;
    background:rgba(0,0,0,0.35);box-shadow:0 10px 30px rgba(0,0,0,0.5);
    border:1px solid rgba(255,255,255,0.04);text-align:center;
  }
  h1{margin:0 0 8px}
  p.subtitle{margin:0 0 18px;opacity:0.9;font-size:14px}
  input{width:100%;padding:10px;border-radius:8px;border:none;margin:8px 0;background:rgba(255,255,255,0.04);color:#fff}
  input:focus{outline:2px solid var(--accent)}
  button{width:100%;padding:10px;border-radius:8px;border:none;background:linear-gradient(90deg,var(--accent),#7b2cbf);color:#140018;font-weight:700;cursor:pointer}
  .temp{margin-top:16px;background:rgba(255,255,255,0.03);padding:10px;border-radius:8px;font-size:13px}
  .warn{color:#ffd1e6;margin-top:8px;font-size:13px}
</style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="lgTitle">
    <h1 id="lgTitle">Sign in</h1>
    <p class="subtitle">Login to access ReallyUnb0ck3d</p>

    <input id="email" type="email" placeholder="Email" autocomplete="username" />
    <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
    <button id="btn">Sign in</button>

    <div class="temp" id="tempBox">
      <div><strong>Temporary (hourly):</strong></div>
      <div id="tempCreds">Loading...</div>
      <div class="warn" id="countdown">expires in: --:--</div>
    </div>
  </div>

<script>
// --- ALWAYS show login page first (do not auto-skip) ---
localStorage.removeItem('loggedIn'); // comment this out if you want login persistent

// Permanent accounts you control:
const users = {
  "admin@unb0ck3d.com": "supersecret",
  "test@example.com": "12345"
};

// Hourly rotating temp account generator (deterministic per UTC hour)
function getTempForHour(ts = Date.now()){
  const hourIndex = Math.floor(ts / 3600000); // hours since epoch
  // create deterministic pseudo-credentials from hourIndex
  const email = `temp${hourIndex % 1000}@unb0ck3d.com`;
  const password = btoa(String(hourIndex)).slice(0,10).replace(/=/g,'A'); // short safe string
  return { email, password, hourIndex };
}

// Update display and countdown
function updateTempUI(){
  const now = Date.now();
  const active = getTempForHour(now);
  document.getElementById('tempCreds').textContent = `${active.email}  /  ${active.password}`;
  const nextHour = (Math.floor(now / 3600000) + 1) * 3600000;
  const msLeft = nextHour - now;
  const minutes = Math.floor(msLeft / 60000);
  const seconds = Math.floor((msLeft % 60000) / 1000);
  document.getElementById('countdown').textContent = `expires in: ${minutes}:${String(seconds).padStart(2,'0')}`;
}
updateTempUI();
setInterval(updateTempUI, 1000);

// Validate credentials: either permanent or the current temp
function isValid(email, pass){
  if (!email || !pass) return false;
  if (users[email] && users[email] === pass) return true;
  const active = getTempForHour();
  return email === active.email && pass === active.password;
}

// On login success: set flag and open site in about:blank + also navigate the current tab to site.html
document.getElementById('btn').addEventListener('click', () => {
  const email = document.getElementById('email').value.trim();
  const pass = document.getElementById('password').value.trim();
  if (isValid(email, pass)) {
    try {
      localStorage.setItem('loggedIn', 'true');
    } catch(e){
      console.warn('localStorage not available', e);
    }

    // open about:blank and inject site.html into it
    let win = null;
    try {
      win = window.open('about:blank', '_blank');
    } catch(e){
      // popup blocked; we'll still navigate this tab
      win = null;
    }

    // fetch site.html and write it into the blank tab (best-effort)
    fetch('site.html').then(r => r.text()).then(html => {
      if (win) {
        try {
          win.document.open();
          win.document.write(html);
          win.document.close();
        } catch(e){
          // writing to new tab can fail in some browsers
          console.error('write to blank failed', e);
        }
      }
    }).catch(err => {
      console.warn('could not fetch site.html (if testing via file:// this won't work).', err);
    });

    // Also navigate the current tab to site.html (so site loads if popup blocked)
    window.location.replace('site.html');
  } else {
    alert('Invalid email or password.');
  }
});

// Enter key support
document.addEventListener('keydown', (e) => { if (e.key === 'Enter') document.getElementById('btn').click(); });
</script>
</body>
</html>
